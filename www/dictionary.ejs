<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="styles.css">
  <title>Education Data Dictionary</title>

  <script>
    $(document).ready(() => {
      // hide and show scrollbars dynamically
      $("body").css("overflow", "hidden"); // "auto"

      // waiting error messages
      const err = "<%= error %>"
      if (err.length > 0) {
        alert(err)
      }
    });
  </script>

</head>

<body>

  <!----- Title ------------------------------------------------------->
  <h1>
    <%= title %>
  </h1>

  <hr class="line1">
  <br>

  <!----- Entity Class Path ------------------------------------------------------->
  <div class="nav">
    <% for (const path of navPathCol) { %>
    <% for (const [i, seg] of path.entries()) { %>
    <span class="nav" onclick="
        $('#search-entity').val('<%= seg %>');
        $('#search-form').submit();"> <%= seg %> </span>
    <% if (i < path.length-1) { %> <span> / </span> <% } %>
    <% } %>
    <br>
    <% } %>
  </div>

  <!--------------------------------------------------------------------------->
  <div id="container">

    <!----- Entity List ------------------------------------------------------->
    <div id="leftThing">

      <form id="search-form" action="/search" method="post">

        <div id="search-div">
          <input id="search-entity" type="text" name="content" placeholder="Entity or Identifier" value="<%= search_value %>" style="padding: 5px 0px 5px 10px;">
          <input type="submit" value="go" style="padding: 5px 10px 5px 10px; font-size: 14px;">
        </div>

        <ul class="entity-list">
          <% for(const entity of entities) { %>
          <li class="link" onclick="
                    $('#search-entity').val('<%= entity %>');
                    $('#search-form').submit();">
            <span>
              <%= entity %>
            </span>
          </li>
          <% } %>
        </ul>

      </form>

    </div>

    <!--------------------------------------------------------------------------------------------------------------------->

    <div id="content">

      <!----- Entity ------------------------------------------------------->
      <div class="block">
        Entity: <% if (content !=null) { %> &nbsp;&nbsp;<%=entity%> <% } %>
        <hr class="line2">
      </div>

      <!----- Collections ------------------------------------------------------->
      <div class="block">
        Collections <% if (content !=null) { %>

        <% for(const [i, col] of collections.entries()) { %>

        <p class="content"> <span class="field">Name:&nbsp;&nbsp;</span> <%= col.Name %> </p>

        <p class="content"> <span class="field">Description:&nbsp;&nbsp;</span> <%= col.Description %> </p>

        <p class="content"> <span class="field">Standard:&nbsp;&nbsp;</span> <%= col.Standard %> </p>

        <p class="content"> <span class="field">DefinitionModification:&nbsp;&nbsp;</span> <%= col.DefinitionModification %> </p>

        <div>
          <p class="field"> Elements: </p>
          <% for (let ele of col.Elements) { %> <p class="subitem"> <%= ele %> </p> <% } %>
        </div>

        <div>
          <p class="field"> BusinessRules: </p>
          <% for( let rule of col.BusinessRules) { %> <p class="subitem"> <%= rule %> </p> <% } %>
        </div>

        <% if ( i < collections.length - 1 ) { %>
        <hr class="line3"> <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- CrossrefEntities ------------------------------------------------------->
      <div class="block">
        CrossrefEntities:<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, crf] of crossrefEntities.entries()) { %>

        <span class="shortarray-link" onclick="
                        $('#search-entity').val('<%= crf %>');
                        $('#search-form').submit();">
          <%= crf %>
        </span>

        <% if (i < crossrefEntities.length - 1) { %> &nbsp;|&nbsp; <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- Definition ------------------------------------------------------->
      <div class="block">
        Definition:<% if (content !=null) { %>&nbsp;&nbsp;
        <span class="shortarray"> <%- definition %> </span>
        <% } %>
        <hr class="line2">
      </div>

      <!----- ExpectedAttributes ------------------------------------------------------->
      <div class="block">
        ExpectedAttributes:<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, attr] of expectedAttributes.entries()) { %>

        <span class="shortarray-link" onclick="
                        $('#search-entity').val('<%= attr %>');
                        $('#search-form').submit();">
          <%= attr %>
        </span>

        <% if ( i < expectedAttributes.length - 1) { %> &nbsp;|&nbsp; <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- Identifier ------------------------------------------------------->
      <div class="block">
        Identifier:<% if (content !=null) { %>&nbsp;&nbsp;
        <span class="shortarray"> <%= identifier %> </span>
        <% } %>
        <hr class="line2">
      </div>

      <!----- LegalDefinitions ------------------------------------------------------->
      <div class="block">
        LegalDefinitions<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, def] of legalDefinitions.entries()) { %>

        <p class="content"> <span class="field">LegislationName:&nbsp;&nbsp;</span> <%= def.LegislationName %> </p>

        <p class="content"> <span class="field">Citation:&nbsp;&nbsp;</span> <%= def.Citation %> </p>

        <p class="content"> <span class="field">Link:&nbsp;&nbsp;</span> <%- def.Link %> </p>

        <p class="content"> <span class="field">Datestamp:&nbsp;&nbsp;</span> <%= def.Datestamp %> </p>

        <p class="content"> <span class="field">Definition:&nbsp;&nbsp;</span> <%- def.Definition %> </p>

        <p class="content"> <span class="field">Commentary:&nbsp;&nbsp;</span> <%- def.Commentary %> </p>

        <% if ( i < legalDefinitions.length - 1 ) { %>
        <hr class="line3"> <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- OtherNames ------------------------------------------------------->
      <div class="block">
        OtherNames:<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, on] of otherNames.entries()) { %>

        <span class="shortarray"> <%= on %> </span>

        <% if (i < otherNames.length - 1) { %> &nbsp;|&nbsp; <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- OtherStandards ------------------------------------------------------->
      <div class="block">
        OtherStandards<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, os] of otherStandards.entries()) { %>

        <p class="content"> <span class="field">Standard:&nbsp;&nbsp;</span> <%= os.Standard %> </p>

        <div>
          <p class="content"> <span class="field">Link:&nbsp;&nbsp;</span>
            <% for(const link of os.Link) { %>
          <p class="subitem"> <%- link %> </p> <% } %>
          </p>
        </div>

        <div>
          <p class="content"> <span class="field">Path:&nbsp;&nbsp;</span>
            <% for(const path of os.Path) { %>
          <p class="subitem"> <%= path %>
          </p>
          <% } %>
          </p>
        </div>

        <p class="content"> <span class="field">Definition:&nbsp;&nbsp;</span> <%= os.Definition %> </p>

        <p class="content"> <span class="field">Commentary:&nbsp;&nbsp;</span> <%- os.Commentary %> </p>

        <% if ( i < otherStandards.length - 1 ) { %>
        <hr class="line3">
        <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- SIF ------------------------------------------------------->
      <div class="block">
        SIF<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, s] of sif.entries()) { %>

        <div>
          <p class="content"> <span class="field">XPath:&nbsp;&nbsp;</span>
            <% for(let xpath of s.XPath) { %>
          <p class="subitem"> <%- xpath %> </p>
          <% } %>
          </p>
        </div>

        <p class="content"> <span class="field">Datestamp:&nbsp;&nbsp;</span> <%= s.Datestamp %> </p>

        <p class="content"> <span class="field">Definition:&nbsp;&nbsp;</span> <%- s.Definition %> </p>

        <div>
          <% if ( i < sif.length - 1 ) { %>
          <hr class="line3">
          <% } %>
        </div>

        <% } %>
        <% } %>
        <hr class="line2">
      </div>

      <!----- Superclass ------------------------------------------------------->
      <div class="block">
        Superclass:<% if (content !=null) { %>&nbsp;&nbsp;

        <% for(const [i, sc] of superclass.entries()) { %>

        <span class="shortarray-link" onclick="
                            $('#search-entity').val('<%= sc %>');
                            $('#search-form').submit();">
          <%= sc %>
        </span>

        <% if ( i < superclass.length - 1) { %> &nbsp;|&nbsp; <% } %>

        <% } %>
        <% } %>

        <hr class="line2">
      </div>

      <!----- Type ------------------------------------------------------->
      <div class="block">
        Type:<% if (content !=null) { %>&nbsp;&nbsp;

        <span class="shortarray"> <%= type %> </span>

        <% } %>

        <hr class="line2" style="margin-bottom: 40px;">
      </div>

      <!-- END -->

      <br> <br> <br>

    </div>

  </div>

</body>

</html>